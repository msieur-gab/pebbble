<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="description" content="Pebbble Player - Listen to encrypted voice messages from your magic stone">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.svg">

    <!-- Styles -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">

    <title>Pebbble Player</title>
</head>
<body>
    <!-- Debug Panel (sliding from bottom) -->
    <div id="debug-panel" style="position:fixed;bottom:0;left:0;right:0;max-height:40vh;overflow-y:auto;background:#111;color:#0f0;font-family:monospace;font-size:11px;padding:8px;transform:translateY(100%);transition:transform 0.3s;z-index:9999;border-top:2px solid #0f0;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
            <span style="color:#0f0;font-weight:bold;">>> DEBUG LOG <<</span>
            <button onclick="this.parentElement.parentElement.style.transform='translateY(100%)'" style="background:#333;color:#fff;border:none;padding:4px 12px;border-radius:4px;cursor:pointer;">Close</button>
        </div>
        <div id="debug-log"></div>
    </div>
    <button id="show-debug" onclick="document.getElementById('debug-panel').style.transform='translateY(0)'" style="position:fixed;bottom:10px;right:10px;background:#222;color:#0f0;border:1px solid #0f0;padding:6px 10px;border-radius:4px;z-index:9998;font-size:11px;cursor:pointer;">Debug v8</button>

    <!-- Global NFC Button removed - now using Shadow DOM component directly -->

    <main id="app">
        <!-- App components will be mounted here -->
        <pebbble-player></pebbble-player>
    </main>

    <!-- Audio element for playback -->
    <audio id="audio-element" preload="metadata" playsinline></audio>

    <!-- Debug logger for NFC troubleshooting -->
    <script>
        window.debugLog = function(msg) {
            var log = document.getElementById('debug-log');
            var time = new Date().toLocaleTimeString();
            var div = document.createElement('div');
            div.textContent = time + ': ' + msg;
            log.appendChild(div);
            log.scrollTop = log.scrollHeight;
            console.log('[NFC Debug]', msg);
        };
        debugLog('Debug logger ready');
    </script>

    <!-- App modules -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
